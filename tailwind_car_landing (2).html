// File: api/get-value.js
export default async function handler(req, res) {
  const { year, make, model } = req.query;

  try {
    const response = await fetch(`https://www.carsxe.com/api/v1/vehicle-market-value?key=sj43l9azz_ad448mmj3_wql0gbhxm&year=${year}&make=${make}&model=${model}`);
    const data = await response.json();
    res.status(200).json(data);
  } catch (err) {
    res.status(500).json({ error: 'Failed to fetch from CarsXE API.' });
  }
}

<!-- Updated Frontend JS snippet -->
valueSearchBtn.addEventListener('click', () => {
  const year = yearInput.value;
  const make = makeInput.value.trim();
  const model = modelInput.value.trim();

  if (year && make && model) {
    valueOutput.innerHTML = 'Fetching vehicle value...';

    fetch(`/api/get-value?year=${year}&make=${make}&model=${model}`)
      .then(response => response.json())
      .then(data => {
        if (data && data.result) {
          valueOutput.innerHTML = `
            <div class='bg-white text-blue-800 p-4 rounded shadow animate-fade-in'>
              <strong>${year} ${make} ${model}</strong><br>
              Retail: $${data.result.retail_value}<br>
              Wholesale: $${data.result.wholesale_value}<br>
              Trade-in: $${data.result.trade_in_value}
            </div>`;
        } else {
          valueOutput.innerHTML = '<div class="text-red-500">No data found. Please check your inputs.</div>';
        }
      })
      .catch(err => {
        valueOutput.innerHTML = `<div class='text-red-500'>Error: ${err.message}</div>`;
      });
  } else {
    valueOutput.innerHTML = '<div class="text-red-500">Please fill in all fields.</div>';
  }
});
